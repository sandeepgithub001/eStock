<!--View Leaves start-->
<div class="content-spacing">
    <div class="page-content-wrapper" infinite-scroll [infiniteScrollDistance]="scrollDistance"
        [infiniteScrollUpDistance]="scrollUpDistance" [infiniteScrollThrottle]="throttle" (scrolled)="onScroll($event)">


        <div class="container-fluid">
            <div class="empl-w">
                <div class="row">
                    <div class="col-lg-5">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <!-- <label class="sr-only" for="empSearch">Search</label> -->
                                    <!--New-->
                                    <div class="input-group mb-3">
                                        <ng-autocomplete (keyup.enter)="onEnterKeyPressed($event)"
                                            [(ngModel)]="searchKey" [data]="autoCompleteEmployees" minQueryLength=1
                                            searchKeyword="name"  placeHolder="Search"
                                            [itemTemplate]="itemTemplate" [notFoundTemplate]="notFoundTemplate"
                                            notFoundText="Not Found">
                                        </ng-autocomplete>
                                        <!-- <input type="text" class="form-control" placeholder="Recipient's username" aria-label="Recipient's username" aria-describedby="button-addon2"> -->
                                        <div class="input-group-append">
                                            <button class="btn btn-outline-secondary i-search"
                                                (click)="onSearchKeyButtonPressed()" type="button" id="button-addon2"><i
                                                    class="fa fa-search" aria-hidden="true"></i><span
                                                    class="sr-only">Search</span></button>
                                        </div>
                                    </div>
                                    <ng-template #itemTemplate let-item>
                                        <a [innerHTML]="item.name"></a>
                                    </ng-template>
                                    <ng-template #notFoundTemplate let-notFound>
                                        <div [innerHTML]="notFound"></div>
                                    </ng-template>
                                </div>
                            </div>
                            <div class="col-md-6" *ngxPermissionsOnly="['HR','Admin']">
                                <div class="form-group">
                                    <label class="sr-only" for="statusId">Active</label>
                                    <select class="custom-select" (change)="onStatusChange()" [(ngModel)]="statusId"
                                        id="statusId">
                                        <option value="1">Active</option>
                                        <option value="2">Inactive</option>
                                    </select>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="col-lg-7">
                        <div class="rt-actions">
                            <ul>
                                <li>
                                    <button type="button" (click)="onReset()" class="btn btn-dark btn-small"><i
                                            class="fa fa-refresh" aria-hidden="true"></i> Reset</button>
                                </li>
                                <li *ngxPermissionsOnly="['HR','Admin']">
                                    <a routerLink="/employees/add-employee/0" class="btn btn-add btn-small">
                                        <i class="fa fa-plus" aria-hidden="true"></i> Add New Employee
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-5">
                        <div class="row">
                            <div class="col-md-12">
                                <h1 id="employees" class="fontsize-20">List of Employees</h1>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-7">
                        <div class="records-area">
                            <p>Showing {{employees.length}} out of {{totalRecords}} record(s)</p>
                        </div>
                    </div>
                </div>
                <div class="row" *ngIf="employees.length > 0">
                    <div class="col-lg-12">
                        <div class="standard-table mtp20">
                            <div class="table-responsive">
                                <table id="sticky-header" *ngxPermissionsOnly="['HR','Admin']"
                                    class="table table-bordered table-striped sticky-header"
                                    summary="List of Employees">
                                    <thead class="thead-dark">
                                        <tr>
                                            <th width="5%" scope="col" id="employeeId">Employee ID</th>
                                            <th width="15%" scope="col" id="employeeName">Employee Name</th>
                                            <th width="10%" scope="col" id="department">Department</th>
                                            <th width="10%" scope="col" id="jobTitle">Job Title</th>
                                            <th width="10%" scope="col" id="email">Email</th>
                                            <th width="5%" scope="col" id="mobile">Mobile</th>
                                            <th width="12%" scope="col" id="reportingManager">Reporting Manager</th>
                                            <th width="7%" scope="col" id="action">Action</th>
                                            <th width="5%" scope="col" id="status">Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let item of employees">
                                            <td width="5%" headers="employeeId">{{item.EmployeeCode}}</td>
                                            <td width="15%" headers="employeeName">{{item.EmployeeName}}</td>
                                            <td width="10%" headers="department">{{item.Department}}</td>
                                            <td width="10%" headers="jobTitle">{{item.jobTitle}}</td>
                                            <td width="10%" headers="email">{{item.Email}}</td>
                                            <td width="5%" headers="mobile">{{item.MobileNumber}}</td>
                                            <td width="12%" headers="reportingManager">{{item.ReportingManager}}</td>
                                            <td width="7%" headers="action">
                                                <button class="btn btn-primary btn-small" (click)="onEdit(item.ID)">
                                                    <i class="fa fa-pencil-square" aria-hidden="true"></i> Edit
                                                </button>
                                            </td>
                                            <td width="5%" headers="status">{{item.IsActive}}</td>
                                        </tr>
                                    </tbody>
                                </table>

                                <table id="sticky-header"
                                    *ngxPermissionsOnly="['Employee','ReportingManager','ProjectManager']"
                                    class="table table-bordered table-striped sticky-header"
                                    summary="List of Employees">
                                    <thead class="thead-dark">
                                        <tr>
                                            <th width="5%" scope="col" id="employeeId">Employee ID</th>
                                            <th width="15%" scope="col" id="employeeName">Employee Name</th>
                                            <th width="10%" scope="col" id="department">Department</th>
                                            <th width="10%" scope="col" id="jobTitle">Job Title</th>
                                            <th width="10%" scope="col" id="email">Email</th>
                                            <th width="5%" scope="col" id="mobile">Mobile</th>
                                            <th width="12%" scope="col" id="reportingManager">Reporting Manager</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let item of employees">
                                            <td width="5%" headers="employeeId">{{item.EmployeeCode}}</td>
                                            <td width="15%" headers="employeeName">{{item.EmployeeName}}</td>
                                            <td width="10%" headers="department">{{item.Department}}</td>
                                            <td width="10%" headers="jobTitle">{{item.jobTitle}}</td>
                                            <td width="10%" headers="email">{{item.Email}}</td>
                                            <td width="5%" headers="mobile">{{item.MobileNumber}}</td>
                                            <td width="12%" headers="reportingManager">{{item.ReportingManager}}</td>
                                        </tr>

                                    </tbody>
                                </table>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="row" *ngIf="employees.length == 0">
                    <div class="col-md-12">
                        <div class="alert alert-primary" role="alert">
                            No result found
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>